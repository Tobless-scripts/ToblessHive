<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="/CSS/courses.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Learn new skills with Tobless Hive - Explore courses on AI, ML, Web Development, and more!"
        />
        <meta
            name="keywords"
            content="Tobless Hive, AI courses, ML courses, Web Development, Learn new skills"
        />
        <meta name="author" content="Tobless-Scripts" />

        <!-- Favicons -->
        <link rel="icon" href="/MEDIA/logo.png" type="image/x-icon" />
        <link rel="icon" href="/MEDIA/logo.png" type="image/png" />

        <!-- Apple Touch Icon -->
        <link rel="apple-touch-icon" href="/MEDIA/logo.png" />

        <title>ToblessHive</title>
    </head>
    <body>
        <div class="first-head">
            <span class="contact">
                <span class="phone">
                    <img src="/MEDIA/telephone.png" alt="telephone" />
                    <p>(+234)704 857 8739</p>
                </span>
                <span class="mail">
                    <img src="/MEDIA/mail.png" alt="mail" />
                    <p>obayomitaofeek7@gmail.com</p>
                </span>
            </span>
            <span class="media">
                <button>Log in</button>
                <button>Register</button>
                <img src="/MEDIA/twitter.png" alt="twitter" />
                <img src="/MEDIA/facebook (2).png" alt="facebook" />
                <img src="/MEDIA/instagram.png" alt="instagram" />
                <img src="/MEDIA/linkedIn.png" alt="linkedIn" />
            </span>
        </div>

        <header>
            <div class="fixed">
                <img src="/MEDIA/logo.png" alt="logo" class="logo" />

                <div class="ulcont">
                    <ul class="hide">
                        <li class="hide active">
                            <a href="/index.html">Home</a>
                        </li>
                        <li class="hide">
                            <a href="/HTML/courses.html">Courses</a>
                        </li>
                        <li class="hide"><a href="/HTML/blog.html">Blog</a></li>
                        <li class="hide">
                            <a href="/HTML/features.html">Features</a>
                        </li>
                    </ul>

                    <ul>
                        <i onclick="showSideBar()" id="menu">
                            <a href="#">
                                <img
                                    src="/MEDIA/menu.png"
                                    alt="menu"
                                    height="26"
                                    viewBox="0 96 960 960"
                                    width="30"
                            /></a>
                        </i>
                    </ul>
                </div>
            </div>

            <div class="container">
                <ul>
                    <i onclick="hideSideBar()" class="active">
                        <img
                            src="/MEDIA/close_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg"
                            alt="close"
                            height="30"
                            viewBox="0 96 960 960"
                            width="30"
                            id="hide"
                        />
                    </i>
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/HTML/courses.html">Courses</a></li>
                    <li><a href="/HTML/blog.html">Blog</a></li>
                    <li><a href="/HTML/features.html">Features</a></li>
                </ul>
            </div>
        </header>

        <main>
            <div class="hero-section">
                <h1>Learn Something <span>New</span> Today</h1>
                <input
                    type="text"
                    name="course"
                    id="course-query"
                    placeholder="What do you want to learn"
                />
                <button id="change-query">Search</button>
                <div class="fixed-bar">
                    <span>
                        <p>Whatsapp</p>
                        <a
                            href="https://wa.me/2347048578739
                            "
                            ><img
                                src="/MEDIA/whatsapp-icon.EkoMrkNv.png"
                                alt="whatsapp"
                        /></a>
                    </span>
                    <span>
                        <p>Twitter</p>
                        <a href="https://x.com/ObayomiTaofeek"
                            ><img src="/MEDIA/twitter.png" alt="twitter"
                        /></a>
                    </span>
                    <span>
                        <p>Github</p>
                        <a href="https://github.com/Tobless-scripts"
                            ><img src="/MEDIA/github.png" alt="github"
                        /></a>
                    </span>
                </div>
            </div>
            <div class="general-course">
                <section class="general">
                    <h2>Most Popular</h2>
                    <div id="video-container" class="containers section"></div>
                </section>
                <section class="ai-ml">
                    <h2>AI/ML</h2>
                    <div id="trending-video" class="containers section"></div>
                </section>
                <section class="web-development">
                    <h2>Web Development</h2>
                    <div id="popular-video" class="containers section"></div>
                </section>
                <section class="tech">
                    <h2>Technology</h2>
                    <div id="featured-video" class="containers section"></div>
                </section>
                <section class="ui-ux">
                    <h2>Ui/UX Designing</h2>
                    <div id="design-video" class="containers section"></div>
                </section>
            </div>
        </main>

        <footer>
            <div class="copy">
                <p>Copyright &copy; 2024 Logisco</p>
                <div class="copyLink">
                    <ul>
                        <li>
                            <a href="/index.html">Home</a>
                        </li>
                        <li>
                            <a href="/HTML/courses.html">Courses</a>
                        </li>
                        <li>
                            <a href="/HTML/blog.html">Blog</a>
                        </li>
                        <li>
                            <a href="/HTML/features.html">Features</a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>
    </body>

    <script type="module" src="/JAVASCRIPT/script.js"></script>

    <script src="/JAVASCRIPT/header.js"></script>

    <script src="/main.js"></script>

    <!-- <script src="/JAVASCRIPT/newQuery.js"></script> -->
    <script>
        const apiKey = "AIzaSyANlcpM94oqiopnHzc2zpri4S9dCFPUH0Y";
        let query = document.getElementById("course-query").value;
        const apiUrl = `https://www.googleapis.com/youtube/v3/search?key=${apiKey}&q=${encodeURIComponent(
            query
        )}&part=snippet&type=video&maxResults=12`;

        let currentIframe = null;
        let currentThumbnail = null;

        async function fetchVideos() {
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                displayVideos(data.items);
            } catch (error) {
                console.error("Error fetching videos:", error.message);
            }
        }

        function displayVideos(videos) {
            const container = document.querySelector(".general-course");
            container.innerHTML = "";

            videos.forEach((video) => {
                const videoElement = document.createElement("div");
                videoElement.className = "video";
                videoElement.innerHTML = `
            <img src="${
                video.snippet.thumbnails.high.url
            }" class="thumbnail" alt="${video.snippet.title}">
            <iframe
                src="https://www.youtube.com/embed/${
                    video.id.videoId
                }?autoplay=1" <!-- No mute by default -->
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
  ${
      video.snippet.title.split(" ").slice(0, 10).join(" ") +
      (video.snippet.title.split(" ").length > 10 ? "..." : "")
  }
        `;

                // Add click event listener to replace the thumbnail with the iframe
                const thumbnail = videoElement.querySelector(".thumbnail");
                const iframe = videoElement.querySelector("iframe");

                thumbnail.addEventListener("click", () => {
                    if (currentIframe) {
                        // Stop the previous video by setting its src to about:blank
                        currentIframe.src = "about:blank";
                        // Show the previous thumbnail again
                        currentThumbnail.style.display = "block";
                    }

                    thumbnail.style.display = "none";
                    iframe.style.display = "block";
                    currentIframe = iframe;
                    currentThumbnail = thumbnail;
                });

                container.appendChild(videoElement);
            });
        }

        const changeButton = document.getElementById("change-query");
        changeButton.addEventListener("click", () => {
            fetchVideos();
            const queryInput = document.getElementById("course-query");
            queryInput.value = "";
            console.log("Clicked!");
        });

        const scrollBar = document.querySelector(".section");
        const SCROLL_SPEED = 0.1;
        scrollBar.addEventListener("wheel", (event) => {
            event.preventDefault();
            scrollBar.scrollBy({
                top: event.deltaY * SCROLL_SPEED,
                behavior: "smooth",
            });
        });
    </script>
</html>
